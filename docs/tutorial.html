<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tutorial | Cuppa</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/cuppa/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/cuppa/css/styles.css" />
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <a href="/cuppa/" class="navbar-brand">Cuppa</a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="/cuppa/docs/getting-started">Docs</a></li>
                <li><a href="/cuppa/blog/">Blog</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="https://github.com/phillcunnington/cuppa">GitHub</a></li>
            </ul>
        </div>
    </nav>
    <div class="container">
    <div class="row">
        <div class="alert alert-danger" role="alert"><strong>Cuppa has not been released yet.</strong> This
        documentation is subject to change without notice.</div>
        <div class="col-md-3">

            <h3>Quick Start</h3>
            <ul>
    
        
        
                <li>
                    <a href="/cuppa/docs/getting-started">Getting Started</a>
                </li>
    
        
        
                <li>
                    <a href="/cuppa/docs/tutorial">Tutorial</a>
                </li>
    
            </ul>

            <h3>Guides</h3>
            <ul>
    
        
        
                <li>
                    <a href="/cuppa/docs/parameterised-tests">Parameterised Tests</a>
                </li>
    
        
        
                <li>
                    <a href="/cuppa/docs/skipping-tests">Skipping Tests</a>
                </li>
    
        
        
                <li>
                    <a href="/cuppa/docs/exceptions">Handling Exceptions</a>
                </li>
    
        
        
                <li>
                    <a href="/cuppa/docs/timeouts">Timeouts</a>
                </li>
    
        
        
                <li>
                    <a href="/cuppa/docs/reporters">Reporters</a>
                </li>
    
        
        
                <li>
                    <a href="/cuppa/docs/integrating-with-existing-tests">Integrating with Existing Tests</a>
                </li>
    
        
        
                <li>
                    <a href="/cuppa/docs/writing-a-reporter">Writing a Reporter</a>
                </li>
    
            </ul>

            <h3>Reference</h3>
            <ul>
    
        
        
                <li>
                    <a href="/cuppa/docs/testing-api">Testing API</a>
                </li>
    
        
        
                <li>
                    <a href="/cuppa/docs/integration-api">Integration API</a>
                </li>
    
            </ul>

        </div>
        <div class="col-md-9">
            <h1>Tutorial</h1>
            <a href="https://github.com/phillcunnington/cuppa/blob/master/docs/_docs/tutorial.md" class="pull-right">Edit on GitHub</a>
<h2 id="our-first-test">Our First Test</h2>

<p>Cuppa tests are defined at runtime. Tests are often written in a class’s initialiser block.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="o">{</span>
        <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 when the value is not present"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
            <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>We define a test by calling <code class="highlighter-rouge">it</code>, a static method from the <code class="highlighter-rouge">Cuppa</code> class. We pass it a description of the behaviour we
expect and a lambda expression that asserts the behaviour.</p>

<p>Cuppa makes extensive use of lambda expressions - a feature introduced in Java 8. They’re just like anonymous classes
but their syntax is much more compact. If you’ve never used them before, don’t worry, there’s not much more you need
to know about them to use Cuppa.</p>

<h3 id="why-it">Why <code class="highlighter-rouge">it</code>?</h3>

<p>The method is called <code class="highlighter-rouge">it</code> to remind us to describe the <em>behaviour</em> we are testing, helping to keep our test names
consistent and readable.</p>

<h3 id="running-the-test">Running the Test</h3>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mvn <span class="nb">test</span>
</code></pre>
</div>

<p>This is what Cuppa outputs:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  ✓ returns -1 when the value is not present


  1 passing
</code></pre>
</div>

<h2 id="grouping-tests">Grouping Tests</h2>

<p>We’ve explained that our tests describe behaviour, so it makes sense to document what it is that we are describing the
behaviour of.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="o">{</span>
        <span class="n">describe</span><span class="o">(</span><span class="s">"List"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">describe</span><span class="o">(</span><span class="s">"#indexOf"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 when the value is not present"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
                    <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
                <span class="o">});</span>
            <span class="o">});</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>We’ve wrapped our test in two nested “describe” blocks. The <code class="highlighter-rouge">describe</code> method allows us to group tests together
that describe the same thing, further aiding readability.</p>

<p>Running Cuppa we see that the test is now nicely nested under the thing it describes:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  List
    #indexOf
      ✓ returns -1 when the value is not present


  1 passing
</code></pre>
</div>

<h2 id="when">When</h2>

<p>It is often the case when we want to group tests together because they share state. For example,</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="o">{</span>
        <span class="n">describe</span><span class="o">(</span><span class="s">"List"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">when</span><span class="o">(</span><span class="s">"it is empty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#indexOf"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 for all inputs"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">();</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
                    <span class="o">});</span>
                <span class="o">});</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#isEmpty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns true"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">();</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()).</span><span class="na">isTrue</span><span class="o">();</span>
                    <span class="o">});</span>
                <span class="o">});</span>
            <span class="o">});</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>  List
    when it is empty
      #indexOf
        ✓ returns -1 for all inputs
      #isEmpty
        ✓ returns true


  1 passing
</code></pre>
</div>

<h2 id="before-and-after">Before and After</h2>

<p>In the previous example, we created the empty list twice. Let’s remove this repetition by using the <code class="highlighter-rouge">beforeEach</code> method.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">;</span>

    <span class="o">{</span>
        <span class="n">describe</span><span class="o">(</span><span class="s">"List"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">when</span><span class="o">(</span><span class="s">"it is empty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">beforeEach</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">();</span>
                <span class="o">});</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#indexOf"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 for all inputs"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
                    <span class="o">});</span>
                <span class="o">});</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#isEmpty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns true"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()).</span><span class="na">isTrue</span><span class="o">();</span>
                    <span class="o">});</span>
                <span class="o">});</span>
            <span class="o">});</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The lambda expression we pass to <code class="highlighter-rouge">beforeEach</code> is executed once before each test in the same <code class="highlighter-rouge">describe</code> or <code class="highlighter-rouge">when</code> block.
It is also executed for any test that is in a nested <code class="highlighter-rouge">describe</code> or <code class="highlighter-rouge">when</code> block.</p>

<h2 id="well-done">Well Done</h2>

<p>We’ve explored the basic features of Cuppa. You now know enough to start writing tests with Cuppa. If you’d like
to learn more then check out some of the guides, starting with
<a href="/cuppa/docs/parameterised-tests.html">parameterised tests</a>.</p>








            <nav>
                <ul class="pager">
        
        
        
        
                    <li class="previous">
                        <a href="/cuppa/docs/getting-started" class="prev">Back</a>
                    </li>
        
        
        
        
        
                    <li class="next">
                        <a href="/cuppa/docs/parameterised-tests" class="next">Next</a>
        
                    </li>
                </ul>
            </nav>
            <div class="clear"></div>

        </div>
    </div>
</div>
    <div class="container">
        <footer class="text-right">
            © 2015–2016 ForgeRock AS.<br>
            Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.
        </footer>
    </div>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-72837005-1', 'auto');
        ga('send', 'pageview');

    </script>
</body>
</html>