<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tutorial | Cuppa</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,300" type="text/css">
    <link rel="stylesheet" href="//css/styles.css" type="text/css">
</head>
<body>
    <nav class="navbar navbar-inverse navbar-static-top">
        <div class="container">
            <div class="navbar-header">
                <a href="//" class="navbar-brand">Cuppa</a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="//docs/getting-started">Docs</a></li>
                <li><a href="//blog/">Blog</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="https://github.com/cuppa-framework/cuppa">GitHub <img src="//img/GitHub-Mark-Light-32px.png" width="20" height="20" class="github-logo"></a></li>
            </ul>
        </div>
    </nav>
    <div class="container">
    <div class="row">
        <div class="alert alert-danger" role="alert"><strong>Cuppa has not been released yet.</strong> This
        documentation is subject to change without notice.</div>
        <nav class="col-md-3 sidebar">

            <h3>Quick Start</h3>
            <ul>
    
        
        
        
                <li>
                    <a href="//docs/getting-started">Getting Started</a>
                </li>
        
    
        
        
        
                <li>
                    <a href="//docs/tutorial" class="active">Tutorial</a>
                </li>
        
    
            </ul>
    
            <hr>
    

            <h3>Guides</h3>
            <ul>
    
        
        
        
                <li>
                    <a href="//docs/parameterised-tests">Parameterised Tests</a>
                </li>
        
    
        
        
        
                <li>
                    <a href="//docs/skipping-tests">Skipping Tests</a>
                </li>
        
    
        
        
        
                <li>
                    <a href="//docs/exceptions">Handling Exceptions</a>
                </li>
        
    
        
        
        
                <li>
                    <a href="//docs/timeouts">Timeouts</a>
                </li>
        
    
        
        
        
                <li>
                    <a href="//docs/reporters">Reporters</a>
                </li>
        
    
        
        
        
                <li>
                    <a href="//docs/integrating-with-existing-tests">Integrating with Existing Tests</a>
                </li>
        
    
        
        
        
                <li>
                    <a href="//docs/writing-a-reporter">Writing a Reporter</a>
                </li>
        
    
            </ul>
    
            <hr>
    

            <h3>Javadoc</h3>
            <ul>
    
        
                <li>
                    <a href="//javadoc/cuppa/"><code>cuppa</code></a>
                </li>
        
    
        
                <li>
                    <a href="//javadoc/cuppa-junit/"><code>cuppa-junit</code></a>
                </li>
        
    
            </ul>
    

        </nav>
        <div class="col-md-9">
            <h1>
                Tutorial
                <a href="https://github.com/cuppa-framework/cuppa/blob/master/docs/_docs/tutorial.md" class="edit-page">Edit on GitHub</a>
            </h1>

<h2 id="our-first-test">Our First Test</h2>

<p>Cuppa tests are defined at runtime, often in a class’s initialiser block.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="o">{</span>
        <span class="n">describe</span><span class="o">(</span><span class="s">"List#indexOf"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 when the value is not present"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
                <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">});</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>We use the <code class="highlighter-rouge">@Test</code> annotation so Cuppa can find our class when running the tests.</p>

<p>We start by calling <code class="highlighter-rouge">describe</code>, a static method of the <code class="highlighter-rouge">Cuppa</code> class, to tell Cuppa what we’re testing.
Cuppa doesn’t care what string you pass to <code class="highlighter-rouge">describe</code> so you should use something that makes sense to you.
The string is only used when generating reports.</p>

<p>We also pass a lambda-expression, where all the tests related to <code class="highlighter-rouge">List#indexOf</code> are defined.</p>

<div class="alert alert-info" role="alert">
  <h4 id="lambda-expressions">Lambda Expressions</h4>

  <p>Cuppa makes extensive use of lambda expressions - a feature introduced in Java 8. They’re just like anonymous classes
but their syntax is much more compact. If you’ve never used them before, don’t worry, there’s not much more you need
to know in order to use Cuppa.</p>
</div>

<p>Finally, we define a test by calling another static method <code class="highlighter-rouge">it</code>.
We pass it a description of the behaviour we want to test and a lambda expression that asserts that behaviour.</p>

<div class="alert alert-info" role="alert">
  <h4 id="why-it">Why <code class="highlighter-rouge">it</code>?</h4>

  <p>The method is called <code class="highlighter-rouge">it</code> to remind us to describe the <em>behaviour</em> we are testing, helping to keep our test names
consistent and readable.</p>
</div>

<h3 id="running-it">Running it</h3>

<p>Use Maven to run the test:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>mvn <span class="nb">test</span>
</code></pre>
</div>

<p>Cuppa will print out a report:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  List#indexOf
    ✓ returns -1 when the value is not present


  1 passing
</code></pre>
</div>

<h2 id="the-next-test">The Next Test</h2>

<p>Now we can add another test right beside the first:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="o">{</span>
        <span class="n">describe</span><span class="o">(</span><span class="s">"List#indexOf"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 when the value is not present"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
                <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">});</span>
            <span class="n">it</span><span class="o">(</span><span class="s">"returns 0-based index of value when the value is present"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
                <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">2</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">});</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Running the tests prints:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  List#indexOf
    ✓ returns -1 when the value is not present
    ✓ returns 0-based index of value when the value is present


  2 passing
</code></pre>
</div>

<h2 id="further-grouping-of-tests">Further Grouping of Tests</h2>

<p>So far we’ve only written tests for a single method, <code class="highlighter-rouge">indexOf</code>. If we want to test more methods, it makes sense to nest a second
level of <code class="highlighter-rouge">describe</code> blocks.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="o">{</span>
        <span class="n">describe</span><span class="o">(</span><span class="s">"List"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">describe</span><span class="o">(</span><span class="s">"#indexOf"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 when the value is not present"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
                    <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
                <span class="o">});</span>
                <span class="n">it</span><span class="o">(</span><span class="s">"returns 0-based index of value when the value is present"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
                    <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">2</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                <span class="o">});</span>
            <span class="o">});</span>
            <span class="n">describe</span><span class="o">(</span><span class="s">"#isEmpty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">it</span><span class="o">(</span><span class="s">"returns true when the list is empty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">();</span>
                    <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()).</span><span class="na">isTrue</span><span class="o">();</span>
                <span class="o">});</span>
                <span class="n">it</span><span class="o">(</span><span class="s">"returns false when the list has a single element"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                    <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()).</span><span class="na">isFalse</span><span class="o">();</span>
                <span class="o">});</span>
            <span class="o">});</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Running the tests prints:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  List
    #indexOf
      ✓ returns -1 when the value is not present
      ✓ returns 0-based index of value when the value is present
    #isEmpty
      ✓ returns true when the list is empty
      ✓ returns false when the list has a single element


  4 passing
</code></pre>
</div>

<p>Structuring the tests like this makes it easy to see which tests relate to which method. Cuppa imposes no constraints
on how you use <code class="highlighter-rouge">describe</code> blocks to add structure to your tests.</p>

<h2 id="when">When</h2>

<p>It is often the case when we want to group tests together because they share the same setup. For example,</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="o">{</span>
        <span class="n">describe</span><span class="o">(</span><span class="s">"List"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">when</span><span class="o">(</span><span class="s">"it is empty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#indexOf"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 for all inputs"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">();</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
                    <span class="o">});</span>
                <span class="o">});</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#isEmpty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns true"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">();</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()).</span><span class="na">isTrue</span><span class="o">();</span>
                    <span class="o">});</span>
                <span class="o">});</span>
            <span class="o">});</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>In this example, we have grouped together tests for an empty list.</p>

<p><code class="highlighter-rouge">when</code> blocks are very similar to <code class="highlighter-rouge">describe</code> blocks and can be used interchangeable. The only difference is that Cuppa
adds the word “when” in reports:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  List
    when it is empty
      #indexOf
        ✓ returns -1 for all inputs
      #isEmpty
        ✓ returns true


  1 passing
</code></pre>
</div>

<p>Using <code class="highlighter-rouge">when</code> helps us better convey the structure of the behaviour we’re testing.</p>

<h2 id="hooks">Hooks</h2>

<p>In the previous example, we created the empty list twice. Let’s remove this repetition by using the <code class="highlighter-rouge">beforeEach</code> method.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ListTest</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">;</span>

    <span class="o">{</span>
        <span class="n">describe</span><span class="o">(</span><span class="s">"List"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">when</span><span class="o">(</span><span class="s">"it is empty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">beforeEach</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">();</span>
                <span class="o">});</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#indexOf"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns -1 for all inputs"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="mi">5</span><span class="o">)).</span><span class="na">isEqualTo</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
                    <span class="o">});</span>
                <span class="o">});</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#isEmpty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns true"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()).</span><span class="na">isTrue</span><span class="o">();</span>
                    <span class="o">});</span>
                <span class="o">});</span>
            <span class="o">});</span>
            <span class="n">when</span><span class="o">(</span><span class="s">"it is not empty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                <span class="n">beforeEach</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">list</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
                <span class="o">});</span>
                <span class="n">describe</span><span class="o">(</span><span class="s">"#isEmpty"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="n">it</span><span class="o">(</span><span class="s">"returns false"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()).</span><span class="na">isFalse</span><span class="o">();</span>
                    <span class="o">});</span>
                <span class="o">});</span>
            <span class="o">});</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The lambda expression we pass to <code class="highlighter-rouge">beforeEach</code> is executed once before each test in the same <code class="highlighter-rouge">describe</code> or <code class="highlighter-rouge">when</code> block.
It is also executed for any test that is in a nested <code class="highlighter-rouge">describe</code> or <code class="highlighter-rouge">when</code> block.</p>

<p>The available hooks are:</p>

<ul>
  <li><code class="highlighter-rouge">before</code> - Runs once before any tests in the same or nested blocks.</li>
  <li><code class="highlighter-rouge">beforeEach</code> - Runs for each test in the same or nested blocks.</li>
  <li><code class="highlighter-rouge">after</code> - Runs once after all tests in the same or nested blocks.</li>
  <li><code class="highlighter-rouge">afterEach</code> - Runs once after each test in the same or nested blocks.</li>
</ul>

<h2 id="well-done">Well Done</h2>

<p>You now know enough to start writing tests. We’ve explored the basic features of Cuppa, but if you’d like to learn more
then check out some of the guides, starting with <a href="//docs/parameterised-tests.html">parameterised tests</a>.</p>








            <nav>
                <ul class="pager">
        
        
        
        
                    <li class="previous">
                        <a href="//docs/getting-started" class="prev">Back</a>
                    </li>
        
        
        
        
        
                    <li class="next">
                        <a href="//docs/parameterised-tests" class="next">Next</a>
        
                    </li>
                </ul>
            </nav>
            <div class="clear"></div>

        </div>
    </div>
</div>
    <div class="container">
        <footer class="text-right">
            © 2015–2016 ForgeRock AS.<br>
            Documentation licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.
        </footer>
    </div>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-72837005-1', 'auto');
        ga('send', 'pageview');
    </script>
</body>
</html>